<!DOCTYPE html>
<html lang="en">
  <%- include('./components/head') %>
  <body>
    <!-- Mobile Toggle Button -->
    <button class="mobile-toggle" onclick="document.getElementById('sidebar').classList.toggle('active')">
        <i class="mdi mdi-menu"></i>
    </button>

    <div class="container-scroller">
      <!-- partial:partials/_sidebar.html -->
      <%- include('./components/adminsidebar') %>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">
           
           <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4">
                <div>
                    <h2 class="mb-1" style="font-weight: 700; letter-spacing: -0.025em; font-size: 1.8rem;">Admin Overview</h2>
                    <p class="text-gray mb-0">System status and information.</p>
                </div>
            </div>

            <% if (req.query.err) { %>
              <% if (req.query.err !== "none") { %>
                <div class="alert fade show mb-4" role="alert" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2); color: #f87171; border-radius: var(--radius);">
                  <div class="d-flex align-items-center">
                    <i class="mdi mdi-alert-circle mr-2"></i>
                    <span>
                      <% if (req.query.err == "MISSINGID") { %>
                          You have not provided the Discord user ID.
                      <% } else if (req.query.err == "CREATECOUPONINVALIDCHARACTERS") { %>
                        One of the characters you entered in coupon creation was invalid, please try again.
                      <% } else if (req.query.err == "REVOKECOUPONCANNOTFINDCODE") { %>
                        One of the characters you entered in coupon revoke was invalid, please try again.
                      <% } else if (req.query.err == "CREATECOUPONEMPTY") { %>
                        While creating your coupon you did not specify to give any resources or coins.
                      <% } else if (req.query.err == "CREATECOUPONLESSTHANONE") { %>
                        While creating your coupon you tried to give less then one in RAM, DISK, CPU and/or coins.
                      <% } else if (req.query.err == "INVALIDID") { %>
                          You have provided a Discord user ID that does not exist, or has not signed up on the dashboard.
                      <% } else if (req.query.err == "MISSINGVARIABLES") { %>
                          You have not provided either ram, disk, cpu, and/or servers.
                      <% } else if (req.query.err == "RAMSIZE" || req.query.err == "DISKSIZE" || req.query.err == "CPUSIZE" || req.query.err == "SERVERSIZE") { %>
                          The RAM, disk, CPU and servers number cannot be less than 0 and must be above 999999999999999.
                      <% } else { %>
                          An unknown error occurred.
                      <% } %>
                    </span>
                  </div>
                </div>
              <% } else if (req.query.err == "none") { %>
                <div class="alert fade show mb-4" role="alert" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2); color: #34d399; border-radius: var(--radius);">
                  <div class="d-flex align-items-center">
                    <i class="mdi mdi-check-circle mr-2"></i>
                    <span>Success! Action completed.</span>
                  </div>
                </div>
              <% } %>
            <% } %>

            <% if (req.query.code) { %>
                <div class="alert fade show mb-4" role="alert" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2); color: #34d399; border-radius: var(--radius);">
                  <div class="d-flex align-items-center">
                    <i class="mdi mdi-ticket-percent mr-2"></i>
                    <span>Success! Created coupon code: <strong><%= req.query.code %></strong></span>
                  </div>
                </div>
            <% } %>

            <div class="row">
              <div class="col-md-6 grid-margin stretch-card">
                <div class="card" style="background: var(--card); border: 1px solid var(--border);">
                  <div class="card-body">
                    <h4 class="card-title mb-4">Version Check</h4>
                    <div id="latestversion" class="p-3 rounded" style="background: var(--background); border: 1px solid var(--border);">
                        <div class="d-flex align-items-center">
                            <div class="spinner-border spinner-border-sm text-primary mr-2" role="status"></div>
                            <span class="text-muted">Checking version...</span>
                        </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-6 grid-margin stretch-card">
                <div class="card" style="background: var(--card); border: 1px solid var(--border);">
                  <div class="card-body">
                    <h4 class="card-title mb-4">Quick Links</h4>
                    <div class="d-flex gap-2" style="gap: 10px;">
                        <a href="https://github.com/danishzzx/Reliactyl" target="_blank" class="btn btn-outline-secondary flex-grow-1" style="border-color: var(--border); color: var(--card-foreground);">
                            <i class="mdi mdi-github mr-2"></i> Github
                        </a>
                        <a href="https://discord.com" target="_blank" class="btn btn-primary flex-grow-1">
                            <i class="mdi mdi-discord mr-2"></i> Support
                        </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
            <script>
                // Hardcoded version check logic
                const currentver = "1.0.0";
                
                // Simulate fetch to keep structure similar but use hardcoded values
                setTimeout(() => {
                    const ver = { version: "1.0.0", prerelease: null }; // Hardcoded latest version
                    
                    if (ver.version == currentver) {
                        document.getElementById("latestversion").innerHTML = `<div class="d-flex align-items-center text-success"><i class="mdi mdi-check-circle mr-2"></i><span>You are running <strong>v${currentver}</strong>. System is up-to-date!</span></div>`;
                    } else if (ver.prerelease == currentver) {
                        document.getElementById("latestversion").innerHTML = `<div class="d-flex align-items-center text-warning"><i class="mdi mdi-flask mr-2"></i><span>You are running pre-release <strong>v${currentver}</strong>.</span></div>`;
                    } else {
                        document.getElementById("latestversion").innerHTML = `<div class="d-flex align-items-center text-danger"><i class="mdi mdi-alert-circle mr-2"></i><span>Update available! Latest: <strong>v${ver.version}</strong> (Current: v${currentver})</span></div>`;
                    };
                }, 500); // Small delay to simulate check
            </script>

          <!-- content-wrapper ends -->
          <%- include('./components/footer') %>
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <%- include('./components/scripts') %>
  </body>
</html>